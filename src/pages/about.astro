---
import RichTextRenderer from '../components/RichTextRenderer.astro';
import SanityImage from '../components/SanityImage.astro';
import BaseLayout from '../layouts/BaseLayout.astro';
import { getAboutPageData, getAuthorData } from '../lib/content';

const [aboutPage, author] = await Promise.all([getAboutPageData(), getAuthorData()]);
---

<BaseLayout title="About" description="About Chris Zombik.">
  <article class="about-page reveal">
    <header class="about-header">
      <div>
        <p class="home-eyebrow">About</p>
        <h1>{aboutPage.title}</h1>
        <p class="about-role">{author.roleLine}</p>
      </div>

      <SanityImage
        image={author.portrait}
        alt={author.portrait?.alt ?? author.name}
        class="about-portrait"
        sizes="(max-width: 900px) 92vw, 280px"
      />
    </header>

    <RichTextRenderer value={aboutPage.body} class="about-rich-text" footnotePrefix="about" />

    {author.socialLinks && author.socialLinks.length > 0 && (
      <footer class="about-links">
        <h2>Elsewhere</h2>
        <ul>
          {author.socialLinks.map((link) => (
            <li>
              <a href={link.url} target="_blank" rel="noreferrer noopener">
                {link.label}
              </a>
            </li>
          ))}
        </ul>
      </footer>
    )}
  </article>
</BaseLayout>
