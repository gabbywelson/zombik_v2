---
import { contentKindLabel, formatDate } from '../lib/format';
import type { PostCardData } from '../lib/sanity.types';
import SanityImage from './SanityImage.astro';
import TagList from './TagList.astro';

interface Props {
  post: PostCardData;
}

const { post } = Astro.props;
---

<article class="post-card">
  <a class="post-card-image-wrap" href={`/writing/${post.slug}`}>
    <SanityImage
      image={post.heroImage}
      alt={post.heroImage?.alt ?? post.title}
      class="post-card-image"
      sizes="(max-width: 980px) 92vw, 520px"
    />
  </a>

  <div class="post-card-content">
    <p class="post-card-meta">
      <span>{formatDate(post.publishedAt)}</span>
      <span aria-hidden="true">â€¢</span>
      <span>{contentKindLabel(post.contentKind)}</span>
    </p>

    <h3 class="post-card-title">
      <a href={`/writing/${post.slug}`}>{post.title}</a>
    </h3>

    <p class="post-card-excerpt">{post.excerpt}</p>

    <TagList tags={post.tags} />
  </div>
</article>
